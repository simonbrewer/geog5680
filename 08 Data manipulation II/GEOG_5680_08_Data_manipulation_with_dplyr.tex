\documentclass[aspectratio=169]{beamer}\usepackage[]{graphicx}\usepackage[]{color}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage{multirow}
%\usecolortheme{beaver}
%\usecolortheme[RGB={129,3,3}]{structure}
\usetheme{CambridgeUS}
\usecolortheme{seahorse}

% Standard header (will need to change date!)
\title[GEOG 5680 Summer '20]{GEOG 5680\\Introduction to R}
\subtitle[dpylr]{08: Data manipulation with dplyr}
\author[S. Brewer]{Simon Brewer}
\institute[Univ. Utah]{
  Geography Department\\
  University of Utah\\
  Salt Lake City, Utah 84112\\[1ex]
  \texttt{simon.brewer@geog.utah.edu}
}
\date[May 04, 2020]{May 04, 2020}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}


%--- the titlepage frame -------------------------%
\begin{frame}
  \titlepage
\end{frame}

% \section{Objectives}
% %--- Slide 3 ----------------%
% \begin{frame}{Objectives}
% \begin{itemize}
%   \item Introduce the tidyverse
%   \item Split-apply-combine
%   \item The \textbf{dplyr} package
% \end{itemize}
% \end{frame}

\section{Tidyverse}
%--- Slide ----------------%
\begin{frame}{Tidyverse}
\begin{itemize}
	\item Set of packages developed by Hadley Wickham and RStudio for data science
	\item Designed to cover the main steps of data analysis: data import, manipulation, transformation, visualization and modeling
\end{itemize}
\begin{center}
	\includegraphics[width=0.75\textwidth]{./images/data-science}
\end{center}
\end{frame}

%--- Slide ----------------%
\begin{frame}{Tidyverse}
\begin{columns}
  \begin{column}{0.6\textwidth}
    \begin{itemize}
    	\item \textbf{ggplot2}: visualization
    	\item \textbf{dplyr}: manipulation
    	\item \textbf{tidyr}: tidying
    	\item \textbf{purrr}: functional programming
    	\item \textbf{tibble}: improved data frames
    	\item \textbf{stringr}: string manipulation
    	\item \textbf{forcat}: factor manipulation
    \end{itemize}
	\end{column}
	\begin{column}{0.4\textwidth}
  \begin{center}
  	\includegraphics[width=0.75\textwidth]{./images/r4ds}
  \end{center}
\end{column}
\end{columns}
\end{frame}

%--- Slide ----------------%
\begin{frame}{Data structure semantics}
\begin{itemize}
	\item Data manipulation of data frames (or tibbles)
	\item Data frame consists of \emph{observations} (rows) and \emph{variables} (columns)
	\item Each combination of observations and variables has a \emph{value}
	\item Each variable is one of R's modes (numeric, factor, etc.)
\end{itemize}
\begin{center}
	\includegraphics[width=0.85\textwidth]{./images/data-semantics}
\end{center}
\end{frame}

\section{Split-apply-combine}
%--- Slide ----------------%
\begin{frame}{Split-apply-combine}
\begin{itemize}
	\item Common approach to data analysis
	\item ``break up a big problem into manageable pieces, operate on each piece independently and then put all the pieces back together''
  \begin{itemize}
  	\item Group-wise ranking or standardization
  	\item Creating data summaries or marginal means
  	\item Fitting models to individual panels of data
  \end{itemize}
  \item Analogous to the map-reduce strategy in parallel processing
\end{itemize}
\end{frame}

\section{\textbf{dplyr}}
%--- Slide ----------------%
\begin{frame}{\textbf{dplyr}}
\begin{itemize}
	\item The \textbf{dplyr} package contains tools for this approach
	\item Set of functions that can be combined to provide full workflow
  \begin{itemize}
  	\item \texttt{filter}: subset or remove observations (rows)
  	\item \texttt{select}: subset or remove variables (columns)
  	\item \texttt{mutate}: modify or creaate new variable
  	\item \texttt{summarize}: aggregate multiple values (e.g. mean or sum)
  	\item \texttt{group\_by}: divide dataset according to one or more factor(s)
  	\item \texttt{arrange}: order the observations
  \end{itemize}
\end{itemize}
\end{frame}

%--- Slide ----------------%
\begin{frame}[fragile]{\textbf{dplyr}}

\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{filter}\hlstd{(gap, lifeExp} \hlopt{<} \hlnum{29}\hlstd{)}
\end{alltt}
\begin{verbatim}
##       country year     pop continent lifeExp gdpPercap
## 1 Afghanistan 1952 8425333      Asia  28.801  779.4453
## 2      Rwanda 1992 7290203    Africa  23.599  737.0686
\end{verbatim}
\begin{alltt}
\hlkwd{filter}\hlstd{(gap, country} \hlopt{==} \hlstr{"Rwanda"}\hlstd{, year} \hlopt{>} \hlnum{1979}\hlstd{)}
\end{alltt}
\begin{verbatim}
##   country year     pop continent lifeExp gdpPercap
## 1  Rwanda 1982 5507565    Africa  46.218  881.5706
## 2  Rwanda 1987 6349365    Africa  44.020  847.9912
## 3  Rwanda 1992 7290203    Africa  23.599  737.0686
## 4  Rwanda 1997 7212583    Africa  36.087  589.9445
## 5  Rwanda 2002 7852401    Africa  43.413  785.6538
## 6  Rwanda 2007 8860588    Africa  46.242  863.0885
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

%--- Slide ----------------%
\begin{frame}[fragile]{\textbf{dplyr}}
\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{select}\hlstd{(gap, year, lifeExp)}
\end{alltt}
\begin{verbatim}
##      year  lifeExp
## 1    1952 28.80100
## 2    1957 30.33200
## 3    1962 31.99700
## 4    1967 34.02000
## 5    1972 36.08800
## 6    1977 38.43800
## 7    1982 39.85400
## 8    1987 40.82200
## 9    1992 41.67400
## 10   1997 41.76300
## 11   2002 42.12900
## 12   2007 43.82800
## 13   1952 55.23000
## 14   1957 59.28000
## 15   1962 64.82000
## 16   1967 66.22000
## 17   1972 67.69000
## 18   1977 68.93000
## 19   1982 70.42000
## 20   1987 72.00000
## 21   1992 71.58100
## 22   1997 72.95000
## 23   2002 75.65100
## 24   2007 76.42300
## 25   1952 43.07700
## 26   1957 45.68500
## 27   1962 48.30300
## 28   1967 51.40700
## 29   1972 54.51800
## 30   1977 58.01400
## 31   1982 61.36800
## 32   1987 65.79900
## 33   1992 67.74400
## 34   1997 69.15200
## 35   2002 70.99400
## 36   2007 72.30100
## 37   1952 30.01500
## 38   1957 31.99900
## 39   1962 34.00000
## 40   1967 35.98500
## 41   1972 37.92800
## 42   1977 39.48300
## 43   1982 39.94200
## 44   1987 39.90600
## 45   1992 40.64700
## 46   1997 40.96300
## 47   2002 41.00300
## 48   2007 42.73100
## 49   1952 62.48500
## 50   1957 64.39900
## 51   1962 65.14200
## 52   1967 65.63400
## 53   1972 67.06500
## 54   1977 68.48100
## 55   1982 69.94200
## 56   1987 70.77400
## 57   1992 71.86800
## 58   1997 73.27500
## 59   2002 74.34000
## 60   2007 75.32000
## 61   1952 69.12000
## 62   1957 70.33000
## 63   1962 70.93000
## 64   1967 71.10000
## 65   1972 71.93000
## 66   1977 73.49000
## 67   1982 74.74000
## 68   1987 76.32000
## 69   1992 77.56000
## 70   1997 78.83000
## 71   2002 80.37000
## 72   2007 81.23500
## 73   1952 66.80000
## 74   1957 67.48000
## 75   1962 69.54000
## 76   1967 70.14000
## 77   1972 70.63000
## 78   1977 72.17000
## 79   1982 73.18000
## 80   1987 74.94000
## 81   1992 76.04000
## 82   1997 77.51000
## 83   2002 78.98000
## 84   2007 79.82900
## 85   1952 50.93900
## 86   1957 53.83200
## 87   1962 56.92300
## 88   1967 59.92300
## 89   1972 63.30000
## 90   1977 65.59300
## 91   1982 69.05200
## 92   1987 70.75000
## 93   1992 72.60100
## 94   1997 73.92500
## 95   2002 74.79500
## 96   2007 75.63500
## 97   1952 37.48400
## 98   1957 39.34800
## 99   1962 41.21600
## 100  1967 43.45300
## 101  1972 45.25200
## 102  1977 46.92300
## 103  1982 50.00900
## 104  1987 52.81900
## 105  1992 56.01800
## 106  1997 59.41200
## 107  2002 62.01300
## 108  2007 64.06200
## 109  1952 68.00000
## 110  1957 69.24000
## 111  1962 70.25000
## 112  1967 70.94000
## 113  1972 71.44000
## 114  1977 72.80000
## 115  1982 73.93000
## 116  1987 75.35000
## 117  1992 76.46000
## 118  1997 77.53000
## 119  2002 78.32000
## 120  2007 79.44100
## 121  1952 38.22300
## 122  1957 40.35800
## 123  1962 42.61800
## 124  1967 44.88500
## 125  1972 47.01400
## 126  1977 49.19000
## 127  1982 50.90400
## 128  1987 52.33700
## 129  1992 53.91900
## 130  1997 54.77700
## 131  2002 54.40600
## 132  2007 56.72800
## 133  1952 40.41400
## 134  1957 41.89000
## 135  1962 43.42800
## 136  1967 45.03200
## 137  1972 46.71400
## 138  1977 50.02300
## 139  1982 53.85900
## 140  1987 57.25100
## 141  1992 59.95700
## 142  1997 62.05000
## 143  2002 63.88300
## 144  2007 65.55400
## 145  1952 53.82000
## 146  1957 58.45000
## 147  1962 61.93000
## 148  1967 64.79000
## 149  1972 67.45000
## 150  1977 69.86000
## 151  1982 70.69000
## 152  1987 71.14000
## 153  1992 72.17800
## 154  1997 73.24400
## 155  2002 74.09000
## 156  2007 74.85200
## 157  1952 47.62200
## 158  1957 49.61800
## 159  1962 51.52000
## 160  1967 53.29800
## 161  1972 56.02400
## 162  1977 59.31900
## 163  1982 61.48400
## 164  1987 63.62200
## 165  1992 62.74500
## 166  1997 52.55600
## 167  2002 46.63400
## 168  2007 50.72800
## 169  1952 50.91700
## 170  1957 53.28500
## 171  1962 55.66500
## 172  1967 57.63200
## 173  1972 59.50400
## 174  1977 61.48900
## 175  1982 63.33600
## 176  1987 65.20500
## 177  1992 67.05700
## 178  1997 69.38800
## 179  2002 71.00600
## 180  2007 72.39000
## 181  1952 59.60000
## 182  1957 66.61000
## 183  1962 69.51000
## 184  1967 70.42000
## 185  1972 70.90000
## 186  1977 70.81000
## 187  1982 71.08000
## 188  1987 71.34000
## 189  1992 71.19000
## 190  1997 70.32000
## 191  2002 72.14000
## 192  2007 73.00500
## 193  1952 31.97500
## 194  1957 34.90600
## 195  1962 37.81400
## 196  1967 40.69700
## 197  1972 43.59100
## 198  1977 46.13700
## 199  1982 48.12200
## 200  1987 49.55700
## 201  1992 50.26000
## 202  1997 50.32400
## 203  2002 50.65000
## 204  2007 52.29500
## 205  1952 39.03100
## 206  1957 40.53300
## 207  1962 42.04500
## 208  1967 43.54800
## 209  1972 44.05700
## 210  1977 45.91000
## 211  1982 47.47100
## 212  1987 48.21100
## 213  1992 44.73600
## 214  1997 45.32600
## 215  2002 47.36000
## 216  2007 49.58000
## 217  1952 39.41700
## 218  1957 41.36600
## 219  1962 43.41500
## 220  1967 45.41500
## 221  1972 40.31700
## 222  1977 31.22000
## 223  1982 50.95700
## 224  1987 53.91400
## 225  1992 55.80300
## 226  1997 56.53400
## 227  2002 56.75200
## 228  2007 59.72300
## 229  1952 38.52300
## 230  1957 40.42800
## 231  1962 42.64300
## 232  1967 44.79900
## 233  1972 47.04900
## 234  1977 49.35500
## 235  1982 52.96100
## 236  1987 54.98500
## 237  1992 54.31400
## 238  1997 52.19900
## 239  2002 49.85600
## 240  2007 50.43000
## 241  1952 68.75000
## 242  1957 69.96000
## 243  1962 71.30000
## 244  1967 72.13000
## 245  1972 72.88000
## 246  1977 74.21000
## 247  1982 75.76000
## 248  1987 76.86000
## 249  1992 77.95000
## 250  1997 78.61000
## 251  2002 79.77000
## 252  2007 80.65300
## 253  1952 35.46300
## 254  1957 37.46400
## 255  1962 39.47500
## 256  1967 41.47800
## 257  1972 43.45700
## 258  1977 46.77500
## 259  1982 48.29500
## 260  1987 50.48500
## 261  1992 49.39600
## 262  1997 46.06600
## 263  2002 43.30800
## 264  2007 44.74100
## 265  1952 38.09200
## 266  1957 39.88100
## 267  1962 41.71600
## 268  1967 43.60100
## 269  1972 45.56900
## 270  1977 47.38300
## 271  1982 49.51700
## 272  1987 51.05100
## 273  1992 51.72400
## 274  1997 51.57300
## 275  2002 50.52500
## 276  2007 50.65100
## 277  1952 54.74500
## 278  1957 56.07400
## 279  1962 57.92400
## 280  1967 60.52300
## 281  1972 63.44100
## 282  1977 67.05200
## 283  1982 70.56500
## 284  1987 72.49200
## 285  1992 74.12600
## 286  1997 75.81600
## 287  2002 77.86000
## 288  2007 78.55300
## 289  1952 44.00000
## 290  1957 50.54896
## 291  1962 44.50136
## 292  1967 58.38112
## 293  1972 63.11888
## 294  1977 63.96736
## 295  1982 65.52500
## 296  1987 67.27400
## 297  1992 68.69000
## 298  1997 70.42600
## 299  2002 72.02800
## 300  2007 72.96100
## 301  1952 50.64300
## 302  1957 55.11800
## 303  1962 57.86300
## 304  1967 59.96300
## 305  1972 61.62300
## 306  1977 63.83700
## 307  1982 66.65300
## 308  1987 67.76800
## 309  1992 68.42100
## 310  1997 70.31300
## 311  2002 71.68200
## 312  2007 72.88900
## 313  1952 40.71500
## 314  1957 42.46000
## 315  1962 44.46700
## 316  1967 46.47200
## 317  1972 48.94400
## 318  1977 50.93900
## 319  1982 52.93300
## 320  1987 54.92600
## 321  1992 57.93900
## 322  1997 60.66000
## 323  2002 62.97400
## 324  2007 65.15200
## 325  1952 39.14300
## 326  1957 40.65200
## 327  1962 42.12200
## 328  1967 44.05600
## 329  1972 45.98900
## 330  1977 47.80400
## 331  1982 47.78400
## 332  1987 47.41200
## 333  1992 45.54800
## 334  1997 42.58700
## 335  2002 44.96600
## 336  2007 46.46200
## 337  1952 42.11100
## 338  1957 45.05300
## 339  1962 48.43500
## 340  1967 52.04000
## 341  1972 54.90700
## 342  1977 55.62500
## 343  1982 56.69500
## 344  1987 57.47000
## 345  1992 56.43300
## 346  1997 52.96200
## 347  2002 52.97000
## 348  2007 55.32200
## 349  1952 57.20600
## 350  1957 60.02600
## 351  1962 62.84200
## 352  1967 65.42400
## 353  1972 67.84900
## 354  1977 70.75000
## 355  1982 73.45000
## 356  1987 74.75200
## 357  1992 75.71300
## 358  1997 77.26000
## 359  2002 78.12300
## 360  2007 78.78200
## 361  1952 40.47700
## 362  1957 42.46900
## 363  1962 44.93000
## 364  1967 47.35000
## 365  1972 49.80100
## 366  1977 52.37400
## 367  1982 53.98300
## 368  1987 54.65500
## 369  1992 52.04400
## 370  1997 47.99100
## 371  2002 46.83200
## 372  2007 48.32800
## 373  1952 61.21000
## 374  1957 64.77000
## 375  1962 67.13000
## 376  1967 68.50000
## 377  1972 69.61000
## 378  1977 70.64000
## 379  1982 70.46000
## 380  1987 71.52000
## 381  1992 72.52700
## 382  1997 73.68000
## 383  2002 74.87600
## 384  2007 75.74800
## 385  1952 59.42100
## 386  1957 62.32500
## 387  1962 65.24600
## 388  1967 68.29000
## 389  1972 70.72300
## 390  1977 72.64900
## 391  1982 73.71700
## 392  1987 74.17400
## 393  1992 74.41400
## 394  1997 76.15100
## 395  2002 77.15800
## 396  2007 78.27300
## 397  1952 66.87000
## 398  1957 69.03000
## 399  1962 69.90000
## 400  1967 70.38000
## 401  1972 70.29000
## 402  1977 70.71000
## 403  1982 70.96000
## 404  1987 71.58000
## 405  1992 72.40000
## 406  1997 74.01000
## 407  2002 75.51000
## 408  2007 76.48600
## 409  1952 70.78000
## 410  1957 71.81000
## 411  1962 72.35000
## 412  1967 72.96000
## 413  1972 73.47000
## 414  1977 74.69000
## 415  1982 74.63000
## 416  1987 74.80000
## 417  1992 75.33000
## 418  1997 76.11000
## 419  2002 77.18000
## 420  2007 78.33200
## 421  1952 34.81200
## 422  1957 37.32800
## 423  1962 39.69300
## 424  1967 42.07400
## 425  1972 44.36600
## 426  1977 46.51900
## 427  1982 48.81200
## 428  1987 50.04000
## 429  1992 51.60400
## 430  1997 53.15700
## 431  2002 53.37300
## 432  2007 54.79100
## 433  1952 45.92800
## 434  1957 49.82800
## 435  1962 53.45900
## 436  1967 56.75100
## 437  1972 59.63100
## 438  1977 61.78800
## 439  1982 63.72700
## 440  1987 66.04600
## 441  1992 68.45700
## 442  1997 69.95700
## 443  2002 70.84700
## 444  2007 72.23500
## 445  1952 48.35700
## 446  1957 51.35600
## 447  1962 54.64000
## 448  1967 56.67800
## 449  1972 58.79600
## 450  1977 61.31000
## 451  1982 64.34200
## 452  1987 67.23100
## 453  1992 69.61300
## 454  1997 72.31200
## 455  2002 74.17300
## 456  2007 74.99400
## 457  1952 41.89300
## 458  1957 44.44400
## 459  1962 46.99200
## 460  1967 49.29300
## 461  1972 51.13700
## 462  1977 53.31900
## 463  1982 56.00600
## 464  1987 59.79700
## 465  1992 63.67400
## 466  1997 67.21700
## 467  2002 69.80600
## 468  2007 71.33800
## 469  1952 45.26200
## 470  1957 48.57000
## 471  1962 52.30700
## 472  1967 55.85500
## 473  1972 58.20700
## 474  1977 56.69600
## 475  1982 56.60400
## 476  1987 63.15400
## 477  1992 66.79800
## 478  1997 69.53500
## 479  2002 70.73400
## 480  2007 71.87800
## 481  1952 34.48200
## 482  1957 35.98300
## 483  1962 37.48500
## 484  1967 38.98700
## 485  1972 40.51600
## 486  1977 42.02400
## 487  1982 43.66200
## 488  1987 45.66400
## 489  1992 47.54500
## 490  1997 48.24500
## 491  2002 49.34800
## 492  2007 51.57900
## 493  1952 35.92800
## 494  1957 38.04700
## 495  1962 40.15800
## 496  1967 42.18900
## 497  1972 44.14200
## 498  1977 44.53500
## 499  1982 43.89000
## 500  1987 46.45300
## 501  1992 49.99100
## 502  1997 53.37800
## 503  2002 55.24000
## 504  2007 58.04000
## 505  1952 34.07800
## 506  1957 36.66700
## 507  1962 40.05900
## 508  1967 42.11500
## 509  1972 43.51500
## 510  1977 44.51000
## 511  1982 44.91600
## 512  1987 46.68400
## 513  1992 48.09100
## 514  1997 49.40200
## 515  2002 50.72500
## 516  2007 52.94700
## 517  1952 66.55000
## 518  1957 67.49000
## 519  1962 68.75000
## 520  1967 69.83000
## 521  1972 70.87000
## 522  1977 72.52000
## 523  1982 74.55000
## 524  1987 74.83000
## 525  1992 75.70000
## 526  1997 77.13000
## 527  2002 78.37000
## 528  2007 79.31300
## 529  1952 67.41000
## 530  1957 68.93000
## 531  1962 70.51000
## 532  1967 71.55000
## 533  1972 72.38000
## 534  1977 73.83000
## 535  1982 74.89000
## 536  1987 76.34000
## 537  1992 77.46000
## 538  1997 78.64000
## 539  2002 79.59000
## 540  2007 80.65700
## 541  1952 37.00300
## 542  1957 38.99900
## 543  1962 40.48900
## 544  1967 44.59800
## 545  1972 48.69000
## 546  1977 52.79000
## 547  1982 56.56400
## 548  1987 60.19000
## 549  1992 61.36600
## 550  1997 60.46100
## 551  2002 56.76100
## 552  2007 56.73500
## 553  1952 30.00000
## 554  1957 32.06500
## 555  1962 33.89600
## 556  1967 35.85700
## 557  1972 38.30800
## 558  1977 41.84200
## 559  1982 45.58000
## 560  1987 49.26500
## 561  1992 52.64400
## 562  1997 55.86100
## 563  2002 58.04100
## 564  2007 59.44800
## 565  1952 67.50000
## 566  1957 69.10000
## 567  1962 70.30000
## 568  1967 70.80000
## 569  1972 71.00000
## 570  1977 72.50000
## 571  1982 73.80000
## 572  1987 74.84700
## 573  1992 76.07000
## 574  1997 77.34000
## 575  2002 78.67000
## 576  2007 79.40600
## 577  1952 43.14900
## 578  1957 44.77900
## 579  1962 46.45200
## 580  1967 48.07200
## 581  1972 49.87500
## 582  1977 51.75600
## 583  1982 53.74400
## 584  1987 55.72900
## 585  1992 57.50100
## 586  1997 58.55600
## 587  2002 58.45300
## 588  2007 60.02200
## 589  1952 65.86000
## 590  1957 67.86000
## 591  1962 69.51000
## 592  1967 71.00000
## 593  1972 72.34000
## 594  1977 73.68000
## 595  1982 75.24000
## 596  1987 76.67000
## 597  1992 77.03000
## 598  1997 77.86900
## 599  2002 78.25600
## 600  2007 79.48300
## 601  1952 42.02300
## 602  1957 44.14200
## 603  1962 46.95400
## 604  1967 50.01600
## 605  1972 53.73800
## 606  1977 56.02900
## 607  1982 58.13700
## 608  1987 60.78200
## 609  1992 63.37300
## 610  1997 66.32200
## 611  2002 68.97800
## 612  2007 70.25900
## 613  1952 33.60900
## 614  1957 34.55800
## 615  1962 35.75300
## 616  1967 37.19700
## 617  1972 38.84200
## 618  1977 40.76200
## 619  1982 42.89100
## 620  1987 45.55200
## 621  1992 48.57600
## 622  1997 51.45500
## 623  2002 53.67600
## 624  2007 56.00700
## 625  1952 32.50000
## 626  1957 33.48900
## 627  1962 34.48800
## 628  1967 35.49200
## 629  1972 36.48600
## 630  1977 37.46500
## 631  1982 39.32700
## 632  1987 41.24500
## 633  1992 43.26600
## 634  1997 44.87300
## 635  2002 45.50400
## 636  2007 46.38800
## 637  1952 37.57900
## 638  1957 40.69600
## 639  1962 43.59000
## 640  1967 46.24300
## 641  1972 48.04200
## 642  1977 49.92300
## 643  1982 51.46100
## 644  1987 53.63600
## 645  1992 55.08900
## 646  1997 56.67100
## 647  2002 58.13700
## 648  2007 60.91600
## 649  1952 41.91200
## 650  1957 44.66500
## 651  1962 48.04100
## 652  1967 50.92400
## 653  1972 53.88400
## 654  1977 57.40200
## 655  1982 60.90900
## 656  1987 64.49200
## 657  1992 66.39900
## 658  1997 67.65900
## 659  2002 68.56500
## 660  2007 70.19800
## 661  1952 60.96000
## 662  1957 64.75000
## 663  1962 67.65000
## 664  1967 70.00000
## 665  1972 72.00000
## 666  1977 73.60000
## 667  1982 75.45000
## 668  1987 76.20000
## 669  1992 77.60100
## 670  1997 80.00000
## 671  2002 81.49500
## 672  2007 82.20800
## 673  1952 64.03000
## 674  1957 66.41000
## 675  1962 67.96000
## 676  1967 69.50000
## 677  1972 69.76000
## 678  1977 69.95000
## 679  1982 69.39000
## 680  1987 69.58000
## 681  1992 69.17000
## 682  1997 71.04000
## 683  2002 72.59000
## 684  2007 73.33800
## 685  1952 72.49000
## 686  1957 73.47000
## 687  1962 73.68000
## 688  1967 73.73000
## 689  1972 74.46000
## 690  1977 76.11000
## 691  1982 76.99000
## 692  1987 77.23000
## 693  1992 78.77000
## 694  1997 78.95000
## 695  2002 80.50000
## 696  2007 81.75700
## 697  1952 37.37300
## 698  1957 40.24900
## 699  1962 43.60500
## 700  1967 47.19300
## 701  1972 50.65100
## 702  1977 54.20800
## 703  1982 56.59600
## 704  1987 58.55300
## 705  1992 60.22300
## 706  1997 61.76500
## 707  2002 62.87900
## 708  2007 64.69800
## 709  1952 37.46800
## 710  1957 39.91800
## 711  1962 42.51800
## 712  1967 45.96400
## 713  1972 49.20300
## 714  1977 52.70200
## 715  1982 56.15900
## 716  1987 60.13700
## 717  1992 62.68100
## 718  1997 66.04100
## 719  2002 68.58800
## 720  2007 70.65000
## 721  1952 44.86900
## 722  1957 47.18100
## 723  1962 49.32500
## 724  1967 52.46900
## 725  1972 55.23400
## 726  1977 57.70200
## 727  1982 59.62000
## 728  1987 63.04000
## 729  1992 65.74200
## 730  1997 68.04200
## 731  2002 69.45100
## 732  2007 70.96400
## 733  1952 45.32000
## 734  1957 48.43700
## 735  1962 51.45700
## 736  1967 54.45900
## 737  1972 56.95000
## 738  1977 60.41300
## 739  1982 62.03800
## 740  1987 65.04400
## 741  1992 59.46100
## 742  1997 58.81100
## 743  2002 57.04600
## 744  2007 59.54500
## 745  1952 66.91000
## 746  1957 68.90000
## 747  1962 70.29000
## 748  1967 71.08000
## 749  1972 71.28000
## 750  1977 72.03000
## 751  1982 73.10000
## 752  1987 74.36000
## 753  1992 75.46700
## 754  1997 76.12200
## 755  2002 77.78300
## 756  2007 78.88500
## 757  1952 65.39000
## 758  1957 67.84000
## 759  1962 69.39000
## 760  1967 70.75000
## 761  1972 71.63000
## 762  1977 73.06000
## 763  1982 74.45000
## 764  1987 75.60000
## 765  1992 76.93000
## 766  1997 78.26900
## 767  2002 79.69600
## 768  2007 80.74500
## 769  1952 65.94000
## 770  1957 67.81000
## 771  1962 69.24000
## 772  1967 71.06000
## 773  1972 72.19000
## 774  1977 73.48000
## 775  1982 74.98000
## 776  1987 76.42000
## 777  1992 77.44000
## 778  1997 78.82000
## 779  2002 80.24000
## 780  2007 80.54600
## 781  1952 58.53000
## 782  1957 62.61000
## 783  1962 65.61000
## 784  1967 67.51000
## 785  1972 69.00000
## 786  1977 70.11000
## 787  1982 71.21000
## 788  1987 71.77000
## 789  1992 71.76600
## 790  1997 72.26200
## 791  2002 72.04700
## 792  2007 72.56700
## 793  1952 63.03000
## 794  1957 65.50000
## 795  1962 68.73000
## 796  1967 71.43000
## 797  1972 73.42000
## 798  1977 75.38000
## 799  1982 77.11000
## 800  1987 78.67000
## 801  1992 79.36000
## 802  1997 80.69000
## 803  2002 82.00000
## 804  2007 82.60300
## 805  1952 43.15800
## 806  1957 45.66900
## 807  1962 48.12600
## 808  1967 51.62900
## 809  1972 56.52800
## 810  1977 61.13400
## 811  1982 63.73900
## 812  1987 65.86900
## 813  1992 68.01500
## 814  1997 69.77200
## 815  2002 71.26300
## 816  2007 72.53500
## 817  1952 42.27000
## 818  1957 44.68600
## 819  1962 47.94900
## 820  1967 50.65400
## 821  1972 53.55900
## 822  1977 56.15500
## 823  1982 58.76600
## 824  1987 59.33900
## 825  1992 59.28500
## 826  1997 54.40700
## 827  2002 50.99200
## 828  2007 54.11000
## 829  1952 50.05600
## 830  1957 54.08100
## 831  1962 56.65600
## 832  1967 59.94200
## 833  1972 63.98300
## 834  1977 67.15900
## 835  1982 69.10000
## 836  1987 70.64700
## 837  1992 69.97800
## 838  1997 67.72700
## 839  2002 66.66200
## 840  2007 67.29700
## 841  1952 47.45300
## 842  1957 52.68100
## 843  1962 55.29200
## 844  1967 57.71600
## 845  1972 62.61200
## 846  1977 64.76600
## 847  1982 67.12300
## 848  1987 69.81000
## 849  1992 72.24400
## 850  1997 74.64700
## 851  2002 77.04500
## 852  2007 78.62300
## 853  1952 55.56500
## 854  1957 58.03300
## 855  1962 60.47000
## 856  1967 64.62400
## 857  1972 67.71200
## 858  1977 69.34300
## 859  1982 71.30900
## 860  1987 74.17400
## 861  1992 75.19000
## 862  1997 76.15600
## 863  2002 76.90400
## 864  2007 77.58800
## 865  1952 55.92800
## 866  1957 59.48900
## 867  1962 62.09400
## 868  1967 63.87000
## 869  1972 65.42100
## 870  1977 66.09900
## 871  1982 66.98300
## 872  1987 67.92600
## 873  1992 69.29200
## 874  1997 70.26500
## 875  2002 71.02800
## 876  2007 71.99300
## 877  1952 42.13800
## 878  1957 45.04700
## 879  1962 47.74700
## 880  1967 48.49200
## 881  1972 49.76700
## 882  1977 52.20800
## 883  1982 55.07800
## 884  1987 57.18000
## 885  1992 59.68500
## 886  1997 55.55800
## 887  2002 44.59300
## 888  2007 42.59200
## 889  1952 38.48000
## 890  1957 39.48600
## 891  1962 40.50200
## 892  1967 41.53600
## 893  1972 42.61400
## 894  1977 43.76400
## 895  1982 44.85200
## 896  1987 46.02700
## 897  1992 40.80200
## 898  1997 42.22100
## 899  2002 43.75300
## 900  2007 45.67800
## 901  1952 42.72300
## 902  1957 45.28900
## 903  1962 47.80800
## 904  1967 50.22700
## 905  1972 52.77300
## 906  1977 57.44200
## 907  1982 62.15500
## 908  1987 66.23400
## 909  1992 68.75500
## 910  1997 71.55500
## 911  2002 72.73700
## 912  2007 73.95200
## 913  1952 36.68100
## 914  1957 38.86500
## 915  1962 40.84800
## 916  1967 42.88100
## 917  1972 44.85100
## 918  1977 46.88100
## 919  1982 48.96900
## 920  1987 49.35000
## 921  1992 52.21400
## 922  1997 54.97800
## 923  2002 57.28600
## 924  2007 59.44300
## 925  1952 36.25600
## 926  1957 37.20700
## 927  1962 38.41000
## 928  1967 39.48700
## 929  1972 41.76600
## 930  1977 43.76700
## 931  1982 45.64200
## 932  1987 47.45700
## 933  1992 49.42000
## 934  1997 47.49500
## 935  2002 45.00900
## 936  2007 48.30300
## 937  1952 48.46300
## 938  1957 52.10200
## 939  1962 55.73700
## 940  1967 59.37100
## 941  1972 63.01000
## 942  1977 65.25600
## 943  1982 68.00000
## 944  1987 69.50000
## 945  1992 70.69300
## 946  1997 71.93800
## 947  2002 73.04400
## 948  2007 74.24100
## 949  1952 33.68500
## 950  1957 35.30700
## 951  1962 36.93600
## 952  1967 38.48700
## 953  1972 39.97700
## 954  1977 41.71400
## 955  1982 43.91600
## 956  1987 46.36400
## 957  1992 48.38800
## 958  1997 49.90300
## 959  2002 51.81800
## 960  2007 54.46700
## 961  1952 40.54300
## 962  1957 42.33800
## 963  1962 44.24800
## 964  1967 46.28900
## 965  1972 48.43700
## 966  1977 50.85200
## 967  1982 53.59900
## 968  1987 56.14500
## 969  1992 58.33300
## 970  1997 60.43000
## 971  2002 62.24700
## 972  2007 64.16400
## 973  1952 50.98600
## 974  1957 58.08900
## 975  1962 60.24600
## 976  1967 61.55700
## 977  1972 62.94400
## 978  1977 64.93000
## 979  1982 66.71100
## 980  1987 68.74000
## 981  1992 69.74500
## 982  1997 70.73600
## 983  2002 71.95400
## 984  2007 72.80100
## 985  1952 50.78900
## 986  1957 55.19000
## 987  1962 58.29900
## 988  1967 60.11000
## 989  1972 62.36100
## 990  1977 65.03200
## 991  1982 67.40500
## 992  1987 69.49800
## 993  1992 71.45500
## 994  1997 73.67000
## 995  2002 74.90200
## 996  2007 76.19500
## 997  1952 42.24400
## 998  1957 45.24800
## 999  1962 48.25100
## 1000 1967 51.25300
## 1001 1972 53.75400
## 1002 1977 55.49100
## 1003 1982 57.48900
## 1004 1987 60.22200
## 1005 1992 61.27100
## 1006 1997 63.62500
## 1007 2002 65.03300
## 1008 2007 66.80300
## 1009 1952 59.16400
## 1010 1957 61.44800
## 1011 1962 63.72800
## 1012 1967 67.17800
## 1013 1972 70.63600
## 1014 1977 73.06600
## 1015 1982 74.10100
## 1016 1987 74.86500
## 1017 1992 75.43500
## 1018 1997 75.44500
## 1019 2002 73.98100
## 1020 2007 74.54300
## 1021 1952 42.87300
## 1022 1957 45.42300
## 1023 1962 47.92400
## 1024 1967 50.33500
## 1025 1972 52.86200
## 1026 1977 55.73000
## 1027 1982 59.65000
## 1028 1987 62.67700
## 1029 1992 65.39300
## 1030 1997 67.66000
## 1031 2002 69.61500
## 1032 2007 71.16400
## 1033 1952 31.28600
## 1034 1957 33.77900
## 1035 1962 36.16100
## 1036 1967 38.11300
## 1037 1972 40.32800
## 1038 1977 42.49500
## 1039 1982 42.79500
## 1040 1987 42.86100
## 1041 1992 44.28400
## 1042 1997 46.34400
## 1043 2002 44.02600
## 1044 2007 42.08200
## 1045 1952 36.31900
## 1046 1957 41.90500
## 1047 1962 45.10800
## 1048 1967 49.37900
## 1049 1972 53.07000
## 1050 1977 56.05900
## 1051 1982 58.05600
## 1052 1987 58.33900
## 1053 1992 59.32000
## 1054 1997 60.32800
## 1055 2002 59.90800
## 1056 2007 62.06900
## 1057 1952 41.72500
## 1058 1957 45.22600
## 1059 1962 48.38600
## 1060 1967 51.15900
## 1061 1972 53.86700
## 1062 1977 56.43700
## 1063 1982 58.96800
## 1064 1987 60.83500
## 1065 1992 61.99900
## 1066 1997 58.90900
## 1067 2002 51.47900
## 1068 2007 52.90600
## 1069 1952 36.15700
## 1070 1957 37.68600
## 1071 1962 39.39300
## 1072 1967 41.47200
## 1073 1972 43.97100
## 1074 1977 46.74800
## 1075 1982 49.59400
## 1076 1987 52.53700
## 1077 1992 55.72700
## 1078 1997 59.42600
## 1079 2002 61.34000
## 1080 2007 63.78500
## 1081 1952 72.13000
## 1082 1957 72.99000
## 1083 1962 73.23000
## 1084 1967 73.82000
## 1085 1972 73.75000
## 1086 1977 75.24000
## 1087 1982 76.05000
## 1088 1987 76.83000
## 1089 1992 77.42000
## 1090 1997 78.03000
## 1091 2002 78.53000
## 1092 2007 79.76200
## 1093 1952 69.39000
## 1094 1957 70.26000
## 1095 1962 71.24000
## 1096 1967 71.52000
## 1097 1972 71.89000
## 1098 1977 72.22000
## 1099 1982 73.84000
## 1100 1987 74.32000
## 1101 1992 76.33000
## 1102 1997 77.55000
## 1103 2002 79.11000
## 1104 2007 80.20400
## 1105 1952 42.31400
## 1106 1957 45.43200
## 1107 1962 48.63200
## 1108 1967 51.88400
## 1109 1972 55.15100
## 1110 1977 57.47000
## 1111 1982 59.29800
## 1112 1987 62.00800
## 1113 1992 65.84300
## 1114 1997 68.42600
## 1115 2002 70.83600
## 1116 2007 72.89900
## 1117 1952 37.44400
## 1118 1957 38.59800
## 1119 1962 39.48700
## 1120 1967 40.11800
## 1121 1972 40.54600
## 1122 1977 41.29100
## 1123 1982 42.59800
## 1124 1987 44.55500
## 1125 1992 47.39100
## 1126 1997 51.31300
## 1127 2002 54.49600
## 1128 2007 56.86700
## 1129 1952 36.32400
## 1130 1957 37.80200
## 1131 1962 39.36000
## 1132 1967 41.04000
## 1133 1972 42.82100
## 1134 1977 44.51400
## 1135 1982 45.82600
## 1136 1987 46.88600
## 1137 1992 47.47200
## 1138 1997 47.46400
## 1139 2002 46.60800
## 1140 2007 46.85900
## 1141 1952 72.67000
## 1142 1957 73.44000
## 1143 1962 73.47000
## 1144 1967 74.08000
## 1145 1972 74.34000
## 1146 1977 75.37000
## 1147 1982 75.97000
## 1148 1987 75.89000
## 1149 1992 77.32000
## 1150 1997 78.32000
## 1151 2002 79.05000
## 1152 2007 80.19600
## 1153 1952 37.57800
## 1154 1957 40.08000
## 1155 1962 43.16500
## 1156 1967 46.98800
## 1157 1972 52.14300
## 1158 1977 57.36700
## 1159 1982 62.72800
## 1160 1987 67.73400
## 1161 1992 71.19700
## 1162 1997 72.49900
## 1163 2002 74.19300
## 1164 2007 75.64000
## 1165 1952 43.43600
## 1166 1957 45.55700
## 1167 1962 47.67000
## 1168 1967 49.80000
## 1169 1972 51.92900
## 1170 1977 54.04300
## 1171 1982 56.15800
## 1172 1987 58.24500
## 1173 1992 60.83800
## 1174 1997 61.81800
## 1175 2002 63.61000
## 1176 2007 65.48300
## 1177 1952 55.19100
## 1178 1957 59.20100
## 1179 1962 61.81700
## 1180 1967 64.07100
## 1181 1972 66.21600
## 1182 1977 68.68100
## 1183 1982 70.47200
## 1184 1987 71.52300
## 1185 1992 72.46200
## 1186 1997 73.73800
## 1187 2002 74.71200
## 1188 2007 75.53700
## 1189 1952 62.64900
## 1190 1957 63.19600
## 1191 1962 64.36100
## 1192 1967 64.95100
## 1193 1972 65.81500
## 1194 1977 66.35300
## 1195 1982 66.87400
## 1196 1987 67.37800
## 1197 1992 68.22500
## 1198 1997 69.40000
## 1199 2002 70.75500
## 1200 2007 71.75200
## 1201 1952 43.90200
## 1202 1957 46.26300
## 1203 1962 49.09600
## 1204 1967 51.44500
## 1205 1972 55.44800
## 1206 1977 58.44700
## 1207 1982 61.40600
## 1208 1987 64.13400
## 1209 1992 66.45800
## 1210 1997 68.38600
## 1211 2002 69.90600
## 1212 2007 71.42100
## 1213 1952 47.75200
## 1214 1957 51.33400
## 1215 1962 54.75700
## 1216 1967 56.39300
## 1217 1972 58.06500
## 1218 1977 60.06000
## 1219 1982 62.08200
## 1220 1987 64.15100
## 1221 1992 66.45800
## 1222 1997 68.56400
## 1223 2002 70.30300
## 1224 2007 71.68800
## 1225 1952 61.31000
## 1226 1957 65.77000
## 1227 1962 67.64000
## 1228 1967 69.61000
## 1229 1972 70.85000
## 1230 1977 70.67000
## 1231 1982 71.32000
## 1232 1987 70.98000
## 1233 1992 70.99000
## 1234 1997 72.75000
## 1235 2002 74.67000
## 1236 2007 75.56300
## 1237 1952 59.82000
## 1238 1957 61.51000
## 1239 1962 64.39000
## 1240 1967 66.60000
## 1241 1972 69.26000
## 1242 1977 70.41000
## 1243 1982 72.77000
## 1244 1987 74.06000
## 1245 1992 74.86000
## 1246 1997 75.97000
## 1247 2002 77.29000
## 1248 2007 78.09800
## 1249 1952 64.28000
## 1250 1957 68.54000
## 1251 1962 69.62000
## 1252 1967 71.10000
## 1253 1972 72.16000
## 1254 1977 73.44000
## 1255 1982 73.75000
## 1256 1987 74.63000
## 1257 1992 73.91100
## 1258 1997 74.91700
## 1259 2002 77.77800
## 1260 2007 78.74600
## 1261 1952 52.72400
## 1262 1957 55.09000
## 1263 1962 57.66600
## 1264 1967 60.54200
## 1265 1972 64.27400
## 1266 1977 67.06400
## 1267 1982 69.88500
## 1268 1987 71.91300
## 1269 1992 73.61500
## 1270 1997 74.77200
## 1271 2002 75.74400
## 1272 2007 76.44200
## 1273 1952 61.05000
## 1274 1957 64.10000
## 1275 1962 66.80000
## 1276 1967 66.80000
## 1277 1972 69.21000
## 1278 1977 69.46000
## 1279 1982 69.66000
## 1280 1987 69.53000
## 1281 1992 69.36000
## 1282 1997 69.72000
## 1283 2002 71.32200
## 1284 2007 72.47600
## 1285 1952 40.00000
## 1286 1957 41.50000
## 1287 1962 43.00000
## 1288 1967 44.10000
## 1289 1972 44.60000
## 1290 1977 45.00000
## 1291 1982 46.21800
## 1292 1987 44.02000
## 1293 1992 23.59900
## 1294 1997 36.08700
## 1295 2002 43.41300
## 1296 2007 46.24200
## 1297 1952 46.47100
## 1298 1957 48.94500
## 1299 1962 51.89300
## 1300 1967 54.42500
## 1301 1972 56.48000
## 1302 1977 58.55000
## 1303 1982 60.35100
## 1304 1987 61.72800
## 1305 1992 62.74200
## 1306 1997 63.30600
## 1307 2002 64.33700
## 1308 2007 65.52800
## 1309 1952 39.87500
## 1310 1957 42.86800
## 1311 1962 45.91400
## 1312 1967 49.90100
## 1313 1972 53.88600
## 1314 1977 58.69000
## 1315 1982 63.01200
## 1316 1987 66.29500
## 1317 1992 68.76800
## 1318 1997 70.53300
## 1319 2002 71.62600
## 1320 2007 72.77700
## 1321 1952 37.27800
## 1322 1957 39.32900
## 1323 1962 41.45400
## 1324 1967 43.56300
## 1325 1972 45.81500
## 1326 1977 48.87900
## 1327 1982 52.37900
## 1328 1987 55.76900
## 1329 1992 58.19600
## 1330 1997 60.18700
## 1331 2002 61.60000
## 1332 2007 63.06200
## 1333 1952 57.99600
## 1334 1957 61.68500
## 1335 1962 64.53100
## 1336 1967 66.91400
## 1337 1972 68.70000
## 1338 1977 70.30000
## 1339 1982 70.16200
## 1340 1987 71.21800
## 1341 1992 71.65900
## 1342 1997 72.23200
## 1343 2002 73.21300
## 1344 2007 74.00200
## 1345 1952 30.33100
## 1346 1957 31.57000
## 1347 1962 32.76700
## 1348 1967 34.11300
## 1349 1972 35.40000
## 1350 1977 36.78800
## 1351 1982 38.44500
## 1352 1987 40.00600
## 1353 1992 38.33300
## 1354 1997 39.89700
## 1355 2002 41.01200
## 1356 2007 42.56800
## 1357 1952 60.39600
## 1358 1957 63.17900
## 1359 1962 65.79800
## 1360 1967 67.94600
## 1361 1972 69.52100
## 1362 1977 70.79500
## 1363 1982 71.76000
## 1364 1987 73.56000
## 1365 1992 75.78800
## 1366 1997 77.15800
## 1367 2002 78.77000
## 1368 2007 79.97200
## 1369 1952 64.36000
## 1370 1957 67.45000
## 1371 1962 70.33000
## 1372 1967 70.98000
## 1373 1972 70.35000
## 1374 1977 70.45000
## 1375 1982 70.80000
## 1376 1987 71.08000
## 1377 1992 71.38000
## 1378 1997 72.71000
## 1379 2002 73.80000
## 1380 2007 74.66300
## 1381 1952 65.57000
## 1382 1957 67.85000
## 1383 1962 69.15000
## 1384 1967 69.18000
## 1385 1972 69.82000
## 1386 1977 70.97000
## 1387 1982 71.06300
## 1388 1987 72.25000
## 1389 1992 73.64000
## 1390 1997 75.13000
## 1391 2002 76.66000
## 1392 2007 77.92600
## 1393 1952 32.97800
## 1394 1957 34.97700
## 1395 1962 36.98100
## 1396 1967 38.97700
## 1397 1972 40.97300
## 1398 1977 41.97400
## 1399 1982 42.95500
## 1400 1987 44.50100
## 1401 1992 39.65800
## 1402 1997 43.79500
## 1403 2002 45.93600
## 1404 2007 48.15900
## 1405 1952 45.00900
## 1406 1957 47.98500
## 1407 1962 49.95100
## 1408 1967 51.92700
## 1409 1972 53.69600
## 1410 1977 55.52700
## 1411 1982 58.16100
## 1412 1987 60.83400
## 1413 1992 61.88800
## 1414 1997 60.23600
## 1415 2002 53.36500
## 1416 2007 49.33900
## 1417 1952 64.94000
## 1418 1957 66.66000
## 1419 1962 69.69000
## 1420 1967 71.44000
## 1421 1972 73.06000
## 1422 1977 74.39000
## 1423 1982 76.30000
## 1424 1987 76.90000
## 1425 1992 77.57000
## 1426 1997 78.77000
## 1427 2002 79.78000
## 1428 2007 80.94100
## 1429 1952 57.59300
## 1430 1957 61.45600
## 1431 1962 62.19200
## 1432 1967 64.26600
## 1433 1972 65.04200
## 1434 1977 65.94900
## 1435 1982 68.75700
## 1436 1987 69.01100
## 1437 1992 70.37900
## 1438 1997 70.45700
## 1439 2002 70.81500
## 1440 2007 72.39600
## 1441 1952 38.63500
## 1442 1957 39.62400
## 1443 1962 40.87000
## 1444 1967 42.85800
## 1445 1972 45.08300
## 1446 1977 47.80000
## 1447 1982 50.33800
## 1448 1987 51.74400
## 1449 1992 53.55600
## 1450 1997 55.37300
## 1451 2002 56.36900
## 1452 2007 58.55600
## 1453 1952 41.40700
## 1454 1957 43.42400
## 1455 1962 44.99200
## 1456 1967 46.63300
## 1457 1972 49.55200
## 1458 1977 52.53700
## 1459 1982 55.56100
## 1460 1987 57.67800
## 1461 1992 58.47400
## 1462 1997 54.28900
## 1463 2002 43.86900
## 1464 2007 39.61300
## 1465 1952 71.86000
## 1466 1957 72.49000
## 1467 1962 73.37000
## 1468 1967 74.16000
## 1469 1972 74.72000
## 1470 1977 75.44000
## 1471 1982 76.42000
## 1472 1987 77.19000
## 1473 1992 78.16000
## 1474 1997 79.39000
## 1475 2002 80.04000
## 1476 2007 80.88400
## 1477 1952 69.62000
## 1478 1957 70.56000
## 1479 1962 71.32000
## 1480 1967 72.77000
## 1481 1972 73.78000
## 1482 1977 75.39000
## 1483 1982 76.21000
## 1484 1987 77.41000
## 1485 1992 78.03000
## 1486 1997 79.37000
## 1487 2002 80.62000
## 1488 2007 81.70100
## 1489 1952 45.88300
## 1490 1957 48.28400
## 1491 1962 50.30500
## 1492 1967 53.65500
## 1493 1972 57.29600
## 1494 1977 61.19500
## 1495 1982 64.59000
## 1496 1987 66.97400
## 1497 1992 69.24900
## 1498 1997 71.52700
## 1499 2002 73.05300
## 1500 2007 74.14300
## 1501 1952 58.50000
## 1502 1957 62.40000
## 1503 1962 65.20000
## 1504 1967 67.50000
## 1505 1972 69.39000
## 1506 1977 70.59000
## 1507 1982 72.16000
## 1508 1987 73.40000
## 1509 1992 74.26000
## 1510 1997 75.25000
## 1511 2002 76.99000
## 1512 2007 78.40000
## 1513 1952 41.21500
## 1514 1957 42.97400
## 1515 1962 44.24600
## 1516 1967 45.75700
## 1517 1972 47.62000
## 1518 1977 49.91900
## 1519 1982 50.60800
## 1520 1987 51.53500
## 1521 1992 50.44000
## 1522 1997 48.46600
## 1523 2002 49.65100
## 1524 2007 52.51700
## 1525 1952 50.84800
## 1526 1957 53.63000
## 1527 1962 56.06100
## 1528 1967 58.28500
## 1529 1972 60.40500
## 1530 1977 62.49400
## 1531 1982 64.59700
## 1532 1987 66.08400
## 1533 1992 67.29800
## 1534 1997 67.52100
## 1535 2002 68.56400
## 1536 2007 70.61600
## 1537 1952 38.59600
## 1538 1957 41.20800
## 1539 1962 43.92200
## 1540 1967 46.76900
## 1541 1972 49.75900
## 1542 1977 52.88700
## 1543 1982 55.47100
## 1544 1987 56.94100
## 1545 1992 58.06100
## 1546 1997 58.39000
## 1547 2002 57.56100
## 1548 2007 58.42000
## 1549 1952 59.10000
## 1550 1957 61.80000
## 1551 1962 64.90000
## 1552 1967 65.40000
## 1553 1972 65.90000
## 1554 1977 68.30000
## 1555 1982 68.83200
## 1556 1987 69.58200
## 1557 1992 69.86200
## 1558 1997 69.46500
## 1559 2002 68.97600
## 1560 2007 69.81900
## 1561 1952 44.60000
## 1562 1957 47.10000
## 1563 1962 49.57900
## 1564 1967 52.05300
## 1565 1972 55.60200
## 1566 1977 59.83700
## 1567 1982 64.04800
## 1568 1987 66.89400
## 1569 1992 70.00100
## 1570 1997 71.97300
## 1571 2002 73.04200
## 1572 2007 73.92300
## 1573 1952 43.58500
## 1574 1957 48.07900
## 1575 1962 52.09800
## 1576 1967 54.33600
## 1577 1972 57.00500
## 1578 1977 59.50700
## 1579 1982 61.03600
## 1580 1987 63.10800
## 1581 1992 66.14600
## 1582 1997 68.83500
## 1583 2002 70.84500
## 1584 2007 71.77700
## 1585 1952 39.97800
## 1586 1957 42.57100
## 1587 1962 45.34400
## 1588 1967 48.05100
## 1589 1972 51.01600
## 1590 1977 50.35000
## 1591 1982 49.84900
## 1592 1987 51.50900
## 1593 1992 48.82500
## 1594 1997 44.57800
## 1595 2002 47.81300
## 1596 2007 51.54200
## 1597 1952 69.18000
## 1598 1957 70.42000
## 1599 1962 70.76000
## 1600 1967 71.36000
## 1601 1972 72.01000
## 1602 1977 72.76000
## 1603 1982 74.04000
## 1604 1987 75.00700
## 1605 1992 76.42000
## 1606 1997 77.21800
## 1607 2002 78.47100
## 1608 2007 79.42500
## 1609 1952 68.44000
## 1610 1957 69.49000
## 1611 1962 70.21000
## 1612 1967 70.76000
## 1613 1972 71.34000
## 1614 1977 73.38000
## 1615 1982 74.65000
## 1616 1987 75.02000
## 1617 1992 76.09000
## 1618 1997 76.81000
## 1619 2002 77.31000
## 1620 2007 78.24200
## 1621 1952 66.07100
## 1622 1957 67.04400
## 1623 1962 68.25300
## 1624 1967 68.46800
## 1625 1972 68.67300
## 1626 1977 69.48100
## 1627 1982 70.80500
## 1628 1987 71.91800
## 1629 1992 72.75200
## 1630 1997 74.22300
## 1631 2002 75.30700
## 1632 2007 76.38400
## 1633 1952 55.08800
## 1634 1957 57.90700
## 1635 1962 60.77000
## 1636 1967 63.47900
## 1637 1972 65.71200
## 1638 1977 67.45600
## 1639 1982 68.55700
## 1640 1987 70.19000
## 1641 1992 71.15000
## 1642 1997 72.14600
## 1643 2002 72.76600
## 1644 2007 73.74700
## 1645 1952 40.41200
## 1646 1957 42.88700
## 1647 1962 45.36300
## 1648 1967 47.83800
## 1649 1972 50.25400
## 1650 1977 55.76400
## 1651 1982 58.81600
## 1652 1987 62.82000
## 1653 1992 67.66200
## 1654 1997 70.67200
## 1655 2002 73.01700
## 1656 2007 74.24900
## 1657 1952 43.16000
## 1658 1957 45.67100
## 1659 1962 48.12700
## 1660 1967 51.63100
## 1661 1972 56.53200
## 1662 1977 60.76500
## 1663 1982 64.40600
## 1664 1987 67.04600
## 1665 1992 69.71800
## 1666 1997 71.09600
## 1667 2002 72.37000
## 1668 2007 73.42200
## 1669 1952 32.54800
## 1670 1957 33.97000
## 1671 1962 35.18000
## 1672 1967 36.98400
## 1673 1972 39.84800
## 1674 1977 44.17500
## 1675 1982 49.11300
## 1676 1987 52.92200
## 1677 1992 55.59900
## 1678 1997 58.02000
## 1679 2002 60.30800
## 1680 2007 62.69800
## 1681 1952 42.03800
## 1682 1957 44.07700
## 1683 1962 46.02300
## 1684 1967 47.76800
## 1685 1972 50.10700
## 1686 1977 51.38600
## 1687 1982 51.82100
## 1688 1987 50.82100
## 1689 1992 46.10000
## 1690 1997 40.23800
## 1691 2002 39.19300
## 1692 2007 42.38400
## 1693 1952 48.45100
## 1694 1957 50.46900
## 1695 1962 52.35800
## 1696 1967 53.99500
## 1697 1972 55.63500
## 1698 1977 57.67400
## 1699 1982 60.36300
## 1700 1987 62.35100
## 1701 1992 60.37700
## 1702 1997 46.80900
## 1703 2002 39.98900
## 1704 2007 43.48700
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

%--- Slide ----------------%
\begin{frame}{The pipe}
    \begin{itemize}
      \item Based on the concept of Unix pipes that allow commands to be chained together
    	\item The \textbf{magrittr} package introduced a similar concept to R
    	\item Allows the output of one function to be passed to the next
    	\item Syntax is `\%\textgreater\%'
    	\item Works with many base R functions, but integrates well with \textbf{dplyr}
    \end{itemize}
  \begin{center}
  	\includegraphics[width=0.4\textwidth]{./images/MagrittePipe}
  \end{center}
\end{frame}

%--- Slide ----------------%
\begin{frame}[fragile]{\textbf{dplyr}}
\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{gap} \hlopt{%>%} \hlkwd{filter}\hlstd{(country} \hlopt{==} \hlstr{"Rwanda"}\hlstd{, year} \hlopt{>} \hlnum{1979}\hlstd{)}
\end{alltt}
\begin{verbatim}
##   country year     pop continent lifeExp gdpPercap
## 1  Rwanda 1982 5507565    Africa  46.218  881.5706
## 2  Rwanda 1987 6349365    Africa  44.020  847.9912
## 3  Rwanda 1992 7290203    Africa  23.599  737.0686
## 4  Rwanda 1997 7212583    Africa  36.087  589.9445
## 5  Rwanda 2002 7852401    Africa  43.413  785.6538
## 6  Rwanda 2007 8860588    Africa  46.242  863.0885
\end{verbatim}
\begin{alltt}
\hlstd{gap} \hlopt{%>%}
  \hlkwd{filter}\hlstd{(country} \hlopt{==} \hlstr{"Rwanda"}\hlstd{, year} \hlopt{>} \hlnum{1979}\hlstd{)} \hlopt{%>%}
  \hlkwd{select}\hlstd{(country, pop)}
\end{alltt}
\begin{verbatim}
##   country     pop
## 1  Rwanda 5507565
## 2  Rwanda 6349365
## 3  Rwanda 7290203
## 4  Rwanda 7212583
## 5  Rwanda 7852401
## 6  Rwanda 8860588
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

%--- Slide ----------------%
\begin{frame}[fragile]{Split-apply-combine with \textbf{dplyr}}
Step 1: split using \texttt{group\_by}
\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{gap} \hlopt{%>%}
  \hlkwd{group_by}\hlstd{(continent)}
\end{alltt}
\begin{verbatim}
## # A tibble: 1,704 x 6
## # Groups:   continent [5]
##    country      year      pop continent lifeExp gdpPercap
##    <chr>       <int>    <dbl> <chr>       <dbl>     <dbl>
##  1 Afghanistan  1952  8425333 Asia         28.8      779.
##  2 Afghanistan  1957  9240934 Asia         30.3      821.
##  3 Afghanistan  1962 10267083 Asia         32.0      853.
##  4 Afghanistan  1967 11537966 Asia         34.0      836.
##  5 Afghanistan  1972 13079460 Asia         36.1      740.
##  6 Afghanistan  1977 14880372 Asia         38.4      786.
##  7 Afghanistan  1982 12881816 Asia         39.9      978.
##  8 Afghanistan  1987 13867957 Asia         40.8      852.
##  9 Afghanistan  1992 16317921 Asia         41.7      649.
## 10 Afghanistan  1997 22227415 Asia         41.8      635.
## # ... with 1,694 more rows
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

%--- Slide ----------------%
\begin{frame}[fragile]{Split-apply-combine with \textbf{dplyr}}
Steps 2 and 3: apply a function (here summarize the mean life expectancy) and combine into new data frame:
\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{gap} \hlopt{%>%}
  \hlkwd{group_by}\hlstd{(continent)} \hlopt{%>%}
  \hlkwd{summarize}\hlstd{(}\hlkwc{meanLifeExp} \hlstd{=} \hlkwd{mean}\hlstd{(lifeExp))}
\end{alltt}
\begin{verbatim}
## # A tibble: 5 x 2
##   continent meanLifeExp
##   <chr>           <dbl>
## 1 Africa           48.9
## 2 Americas         64.7
## 3 Asia             60.1
## 4 Europe           71.9
## 5 Oceania          74.3
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

%--- Slide ----------------%
\begin{frame}[fragile]{Split-apply-combine with \textbf{dplyr}}
Note that you can use multiple factors for grouping:
\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{gap} \hlopt{%>%}
  \hlkwd{group_by}\hlstd{(continent, year)} \hlopt{%>%}
  \hlkwd{summarize}\hlstd{(}\hlkwc{meanLifeExp} \hlstd{=} \hlkwd{mean}\hlstd{(lifeExp))}
\end{alltt}
\begin{verbatim}
## # A tibble: 60 x 3
## # Groups:   continent [5]
##    continent  year meanLifeExp
##    <chr>     <int>       <dbl>
##  1 Africa     1952        39.1
##  2 Africa     1957        41.3
##  3 Africa     1962        43.3
##  4 Africa     1967        45.3
##  5 Africa     1972        47.5
##  6 Africa     1977        49.6
##  7 Africa     1982        51.6
##  8 Africa     1987        53.3
##  9 Africa     1992        53.6
## 10 Africa     1997        53.6
## # ... with 50 more rows
\end{verbatim}
\end{kframe}
\end{knitrout}
\end{frame}

%--- Slide ----------------%
\begin{frame}[fragile]{Split-apply-combine with \textbf{dplyr}}
Results can be piped to other functions (e.g. \texttt{ggplot}):
\begin{knitrout}\scriptsize
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{gap} \hlopt{%>%}
  \hlkwd{group_by}\hlstd{(continent, year)} \hlopt{%>%}
  \hlkwd{summarize}\hlstd{(}\hlkwc{meanLifeExp} \hlstd{=} \hlkwd{mean}\hlstd{(lifeExp))} \hlopt{%>%}
  \hlkwd{ggplot}\hlstd{(}\hlkwd{aes}\hlstd{(}\hlkwc{x} \hlstd{= year,} \hlkwc{y} \hlstd{= meanLifeExp,} \hlkwc{col} \hlstd{= continent))} \hlopt{+} \hlkwd{geom_line}\hlstd{()}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/unnamed-chunk-8-1} 

\end{knitrout}
\end{frame}

\end{document}
